<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Concours de Robotique Cachan</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-c.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

  <header>
    <nav>
      <ul>
        <li><a href="#">Accueil</a></li>
        <li><a href="#processus">Processus</a></li>
        <li><a href="#algorithme">Algorithmes</a></li>
        <li><a href="#concours">Le concours</a></li>
        <li><a href="#bilan">Bilan</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="headPage">
      <h1>Concours de Robotique Cachan</h1>
      <p>Par Eliot, Noa, Alexis et leur Robot</p>
    </section>

    <section id="processus" class="animated">
      <h2>Processus</h2>
      <h3>Notre équipe</h3>
      <p>Bienvenue sur le site de notre équipe de robotique ! Permettez-nous de nous présenter. Nous sommes un groupe d'étudiants qui ont décidé de participer au concours Festivale de Robotique Cachan. <br><br>
        Tout d'abord, parlons du nom de notre groupe. Nous avons pris le temps de réfléchir et nous sommes tombés sur deux options : "Apprenti" et "Flashing Mc Queenies". Nous sommes encore en train de décider quel nom correspondra le mieux à notre équipe. Au début, nous avons choisi "Flashing Mc Queenies" parce que nous voulions faire un robot qui ressemble à Flash McQueen. Mais ensuite, nous avons pensé à "Apprenti" parce que notre robot était lent au départ, alors nous voulions faire un clin d'œil à sa vitesse.<br><br>
        Nous sommes composés d'Eliot, Noa et Alexis. <br><br>
        Le processus de formation de notre groupe a été assez naturel. 
        Alexis, plein d'enthousiasme, envisageait de participer au concours et a immédiatement pensé à Noa et Eliot comme les membres parfaits pour compléter l'équipe.
      <h3>Répartition des tâches</h3>
      <p>Au sein de l'équipe, nous avons essayé de faire une répartition efficace des tâches pour optimiser notre productivité et notre collaboration. Chacun d'entre nous apporte des compétences uniques à notre projet de robotique pour le Concours Festivale de Robotique Cachan, et nous avons défini des rôles pour exploiter au mieux nos atouts.<br><br>
        Eliot joue un rôle central en tant que chef de projet, offrant une orientation et une coordination indispensables à notre équipe. Il s'est chargé de manière exhaustive de l'aspect algorithmique et de la programmation pour garantir le bon fonctionnement du robot et l'accomplissement du plus grand nombre de missions possible. De plus, il a apporté une contribution significative à la partie électronique du projet.<br><br>
        Noa joue un rôle polyvalent au sein de l'équipe. Grâce à ses connaissances et à sa capacité à comprendre rapidement différents domaines, Noa a beaucoup contribué à l'ensemble du projet en aidant les membres de l'équipe à effectuer leurs tâches.<br><br>
        Alexis joue un rôle dans la conception et la modélisation des pièces du robot grâce à ses compétences en CAO. Grâce à son expertise en impression 3D et sa maîtrise du logiciel Solidworks, il apporte une valeur ajoutée considérable à notre projet.
      </p>
      <h3>Gestion du temps</h3>
      <p>
        La gestion du temps s'est avérée être un défi majeur pour notre équipe tout au long de notre participation au projet de robotique "Concours Festivale de Robotique Cachan". Nous nous sommes souvent engagés dans des défis complexes et ambitieux, nécessitant un investissement constant en termes de temps et d'efforts.<br><br>
        Nous avons dû jongler entre les responsabilités scolaires, les engagements personnels et les autres obligations, tout en consacrant le maximum de temps disponible à notre projet de robotique.
      </p>
      <h3>Electroniques</h3>
      <p>
        Nous avons élaboré une solution pour répondre aux exigences du hacheur, de l'Arduino et des capteurs dans la partie électronique. Notre approche consistait à concevoir une carte électronique spécifique, qui joue le rôle d'une plaque labdec, et qui est alimentée par les 5V provenant du hacheur, lui-même alimenté par une source de 12V. En plus de cela, nous avons intégré 5 capteurs noir et blanc dans notre conception. Nous avons placé un capteur central ainsi que deux capteurs latéraux pour garantir que le robot reste sur la piste. Deux autres capteurs ont été positionnés aux extrémités afin de renforcer cette mesure et s'assurer que le robot ne s'écarte pas du tracé.</p>
      <div class="image-slider">
        <img src="robot1.jfif" alt="Image 1">
        <img src="robot2.png" alt="Image 2">
        <img src="robot3.png" alt="Image 3">
        <img src="kicad1.png" alt="Image 3">

      </div>
        
      </section>

    <section id="algorithme" class="animated">
      <h2>Algorithmes</h2>
      <p>Le premier algorithme à concevoir a été le suiveur de ligne à l'aide des 5 capteurs de noir et blanc et du hacheur relié aux moteurs à courant continu. Pour cela il fallais d'abord initialisé les composants relié à la carte arduino au programme.</p>
      <!-- ... -->
      <section class="code">
        <div class="copy-code">
          <button id = "b1" onclick="copyCode('1', 'b1')">Copy Code</button>
        </div>
        <div id="copyStatus"></div>
        <code id ="1">
//Ports des capteurs
int capC = 2;
int capD = 3;
int capG = 4;
int capGG = A2;
int capDD = A1;

//Ports du hacheur
int IN1 = 11;
int IN2 = 10;
int IN3 = 9;
int IN4 = 8;

//Définir les ports comme OUTPUT ou INPUT
void setup() {
  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT);
  pinMode(IN4, OUTPUT);
  pinMode(capC, INPUT);
  pinMode(capD, INPUT);
  pinMode(capG, INPUT);
  pinMode(capDD, INPUT);
  pinMode(capGG, INPUT);
  
  Serial.begin(9600);
}
        </code>
      </section>

      <p>Ensuite nous devions détecter si la ligne se situer sur la droite ou la gauche du robot à l'aide des capteurs en testant une par une les types de détection.</p>

      <section class="code">
        <div class="copy-code">
          <button id = "b2" onclick="copyCode('2','b2')">Copy Code</button>
        </div>
        <div id="copyStatus"></div>
        <code id = "2">
//Initalisation des fonctions
bool centre();
bool gauche();
bool droite();

//Ligne au centre
bool centre() {
  return (digitalRead(capC) == HIGH && digitalRead(capG) == LOW && digitalRead(capD) == LOW && digitalRead(capGG) == LOW && digitalRead(capDD) == LOW);
}

//Ligne à gauche
bool gauche() {
  return (digitalRead(capC) == HIGH && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == LOW && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == LOW && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == HIGH && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capG) == LOW && digitalRead(capD) == LOW && digitalRead(capGG) == HIGH && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == HIGH && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == HIGH && digitalRead(capDD) == LOW);
}

//Ligne à droite
bool droite() {
  return (digitalRead(capC) == HIGH && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == LOW && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == LOW && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == HIGH && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capD) == LOW && digitalRead(capG) == LOW && digitalRead(capDD) == HIGH && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == HIGH && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == HIGH && digitalRead(capGG) == LOW);
}
        </code>
      </section>

      

      <p>Suite à cela il fallait adapter la position du robot à l'aide du hacheur pour que le robot s'ajuste sur la ligne.</p>
      
      <section class="code">
        <div class="copy-code">
          <button id = "b3" onclick="copyCode('3','b3')">Copy Code</button>
        </div>
        <div id="copyStatus"></div>
        <code id = "3">
void loop() {

  if (centre()) {
      //tout droit
      analogWrite(IN1, 50);
      analogWrite(IN2, 255);
      analogWrite(IN3, 50);
      analogWrite(IN4, 255);
  }else if (gauche()) {
      //tourne à gauche
      analogWrite(IN1, 100);
      analogWrite(IN2, 255);
      analogWrite(IN3, 255);
      analogWrite(IN4, 255);
  }else if (droite()){
      //tourne à droite
      analogWrite(IN1, 255);
      analogWrite(IN2, 255);
      analogWrite(IN3, 100);
      analogWrite(IN4, 255);
  }else {
      //tout droit
      analogWrite(IN1, 50);
      analogWrite(IN2, 255);
      analogWrite(IN3, 50);
      analogWrite(IN4, 255);
  }

}
        </code>
      </section>
    <p>
      Pour la détection de tours nous avons compté les fronts descendant des 5 capteurs afin de pouvoirs connaître le nombre de fois que le robot passe sur la ligne de départ.
    </p>

    <section class="code">
      <div class="copy-code">
        <button id = "b4" onclick="copyCode('4','b4')">Copy Code</button>
      </div>
      <div id="copyStatus"></div>
      <code id = "4">
//Initalisation des états précédents des capteurs
int sCapC;
int sCapD;
int sCapG;
int sCapGG;
int sCapDD;

void loop() {
  //Détection de front descendant des 5 capteurs
  if (digitalRead(capGG) == HIGH && digitalRead(capDD) == HIGH && digitalRead(capG) == HIGH && digitalRead(capD) == HIGH && digitalRead(capC) == HIGH) {
    
    if (sCapGG + sCapDD + sCapG + sCapD + sCapC == 5) {
    }else {
      tours++;
    }
  }
  //enregistrement du dernier état des capteurs
  sCapC = digitalRead(capC);
  sCapD = digitalRead(capD);
  sCapG = digitalRead(capG);
  sCapDD = digitalRead(capDD);
  sCapGG = digitalRead(capGG);
}
      </code>
    </section>
    <p>
      Voici le programme complet commenté qui permet d'afficher le temps que met le robot à faire 2 tours.
    </p>
    <section class="code" id="allcode">
      <div class="copy-code">
        <button id = "b5" onclick="copyCode('5','b5')">Copy Code</button>
      </div>
      <div id="copyStatus"></div>
      <code id = "5">
//Bibliothèques nécessaires
#include "LiquidCrystal.h"
#include "stdio.h"
#include "stdlib.h"
#include "string.h"

//Intialisation du LCD
LiquidCrystal lcd(13, 12, A0, 7, 6, 5);

//Ports des capteurs
int capC = 2;
int capD = 3;
int capG = 4;
int capGG = A2;
int capDD = A1;

//Initalisation des états précédents des capteurs
int sCapC;
int sCapD;
int sCapG;
int sCapGG;
int sCapDD;

//Ports du hacheur
int IN1 = 11;
int IN2 = 10;
int IN3 = 9;
int IN4 = 8;

//Variables pour le chronomètre
int TempsEcoule;
int Seconde1;
int Seconde2;
int Minute1;
int Minute2;
int Milliseconde;
int Seconde;
int Minute;
int Heure;
char chronoString[16];
int e = 0;
int secondeTot1;
int secondeTot2;
unsigned long currentTime = 0;
unsigned long previousTime = 0;

//Nombre de tours
int tours = 0;

//Initalisation des fonctions
bool centre();
bool gauche();
bool droite();

//Définir les ports comme OUTPUT ou INPUT
void setup() {
  // put your setup code here, to run once:
  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT);
  pinMode(IN4, OUTPUT);
  pinMode(capC, INPUT);
  pinMode(capD, INPUT);
  pinMode(capG, INPUT);
  pinMode(capDD, INPUT);
  pinMode(capGG, INPUT);
  
  Serial.begin(9600);
}

void loop() {

  //Détection de front descendant des 5 capteurs
  if (digitalRead(capGG) == HIGH && digitalRead(capDD) == HIGH && digitalRead(capG) == HIGH && digitalRead(capD) == HIGH && digitalRead(capC) == HIGH) {
    
    if (sCapGG + sCapDD + sCapG + sCapD + sCapC == 5) {
    }else {
      tours++;
      if (tours == 1) {
        //Enregistrer le temps qu'a pris le robot au premier tour
        Seconde1 = Seconde;
        Minute1 = Minute;
      }else if (tours = 2) {
        //Enregistrer le temps qu'a pris le robot au deuxième tour
        secondeTot1 = Seconde1 + Minute1*60;
        secondeTot2 = Seconde + Minute*60;
        secondeTot2 = secondeTot2 - secondeTot1;
        
        Minute2 = secondeTot2/60;
        Seconde2 = secondeTot2%60;
      }
    }
  }
  //enregistrement du dernier état des capteurs
  sCapC = digitalRead(capC);
  sCapD = digitalRead(capD);
  sCapG = digitalRead(capG);
  sCapDD = digitalRead(capDD);
  sCapGG = digitalRead(capGG);

  //S'arrêter et afficher les temps du robots quand il a fini ses 2 tours.
  if (tours >= 2) {
    while (1) {
      Serial.print(e);
      analogWrite(IN1, 0);
      analogWrite(IN2, 0);
      analogWrite(IN3, 0);
      analogWrite(IN4, 0);
      delay(2000);
      if (e == 0) {
        sprintf(chronoString, "t1: %d:%02d", Minute1, Seconde1);
        lcd.setCursor(0, 0);
        lcd.print(chronoString);
      }else if (e == 1) {
        sprintf(chronoString, "t2: %d:%02d", Minute2, Seconde2);
        lcd.setCursor(0, 0);
        lcd.print(chronoString);
      }else if (e == 2) {
        sprintf(chronoString, "t : %d:%02d", Minute, Seconde);
        lcd.setCursor(0, 0);
        lcd.print(chronoString);
      }
      e++;
      if (e>2) {
        e = 0;
      }
      
    }
    
  }
  else if (centre()) {
    //tout droit
    analogWrite(IN1, 50);
    analogWrite(IN2, 255);
    analogWrite(IN3, 50);
    analogWrite(IN4, 255);
  }else if (gauche()) {
    //tourne à gauche
    analogWrite(IN1, 100);
    analogWrite(IN2, 255);
    analogWrite(IN3, 255);
    analogWrite(IN4, 255);
  }else if (droite()){
    //tourne à droite
    analogWrite(IN1, 255);
    analogWrite(IN2, 255);
    analogWrite(IN3, 100);
    analogWrite(IN4, 255);
  }else {
    //tout droit
    analogWrite(IN1, 50);
    analogWrite(IN2, 255);
    analogWrite(IN3, 50);
    analogWrite(IN4, 255);
  }
  //Affichage du chronomètre
  if (tours < 2) {
    currentTime = millis();
  
    TempsEcoule = currentTime - previousTime;
  
    previousTime = millis();
  }
  Milliseconde = Milliseconde + TempsEcoule;
  if (Milliseconde%50 == 0) {
    if (tours == 0) {
      //Chaine de caractères à envoyer au LCD
      sprintf(chronoString, "t1: %d:%02d", Minute, Seconde, Milliseconde/10);
      
    }else  {
      //Chaine de caractères à envoyer au LCD
      sprintf(chronoString, "t2: %d:%02d", Minute, Seconde, Milliseconde/10);
    }
    lcd.setCursor(0, 0);
    //Afficher la chaîne de caractères sur l'afficheur LCD
    lcd.print(chronoString);  
  }
  if (Milliseconde > 999) {
    Milliseconde = Milliseconde - 1000;
    Seconde++;
    
  }
  if (Seconde > 59) {
    Seconde = 0;
    Minute++;
    
  }
  if (Minute > 59) {
    Minute = 0;
    Heure++;
  }
  
}

//Ligne au centre
bool centre() {
  return (digitalRead(capC) == HIGH && digitalRead(capG) == LOW && digitalRead(capD) == LOW && digitalRead(capGG) == LOW && digitalRead(capDD) == LOW);
}
//Ligne à gauche
bool gauche() {
  return (digitalRead(capC) == HIGH && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == LOW && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == LOW && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == HIGH && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capG) == LOW && digitalRead(capD) == LOW && digitalRead(capGG) == HIGH && digitalRead(capDD) == LOW) ||
         (digitalRead(capC) == HIGH && digitalRead(capG) == HIGH && digitalRead(capD) == LOW && digitalRead(capGG) == HIGH && digitalRead(capDD) == LOW);
}
//Ligne à droite
bool droite() {
  return (digitalRead(capC) == HIGH && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == LOW && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == LOW && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == HIGH && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == LOW && digitalRead(capD) == LOW && digitalRead(capG) == LOW && digitalRead(capDD) == HIGH && digitalRead(capGG) == LOW) ||
         (digitalRead(capC) == HIGH && digitalRead(capD) == HIGH && digitalRead(capG) == LOW && digitalRead(capDD) == HIGH && digitalRead(capGG) == LOW);
}
      </code>
    </section>
    </section>

    <section id="concours" class="animated">
      <h2>Concours</h2>
      <h3>Missions</h3>
      <h3>Résultats</h3>
    </section>
    
    <section id="bilan" class="animated">
      <h2>Bilan</h2>
    </section>

  </main>

  <footer>
    <p>&copy; 2023 IUT de Vélizy - BUT1 GEII</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
